<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DT-Aeros-Telecos</title>
    <link rel="stylesheet" href="../../styles.css">
    <link rel="icon" href="../../resources/icon.ico" type="image/x-icon">
</head>
<body>
    <button class="shadow__btn" onclick="window.location.href='blocs.html'">‚Üê</button>
    <button class="shadow__btn" onclick="window.location.href='../../index.html'">Inici</button>
    <button class="shadow__btn" onclick="window.location.href='https://delegacioestudiants.eetac.upc.edu/ca'">Web Delegaci√≥</button>

    <h1 style="color: #0077c8;">
        <img src="../../resources/logo.jpg" alt="Logo Delegaci√≥ EETAC" width="75">
        DT-Aeros-Telecos - Simulador de notes dels blocs curriculars de la <span style="color: #2b2301;">Delegaci√≥ d'Estudiants de l'EETAC</span>!
    </h1>
<p><strong>&nbsp;</strong></p>
<h2><strong>‚ö†Ô∏è Has seleccionat el model: "<span style="color: #f1a326;">NORMATIVA CURRICULAR A PARTIR DE SETEMBRE CURS 2025-26</span>".</strong></h2>
<p>Si tens pendent el tancament d'algun bloc curricular per l'avaluaci√≥ actual, (juny curs 2024-25), et recomanem tornar enrere i canviar al model actual.</p>
<p><strong>&nbsp;</strong></p>

    <!-- Zona per carregar notes -->
    <h2 style="text-align: center;"><strong>üìÅ Ja tens un codi i vols carregar les notes? Enganxa'l en el recuadre inferior i clica <em>"Carregar Notes"</em>.</strong></h2>
    <p style="text-align: center;">Si encara no tens un codi omple la taula amb les notes que tinguis i guarda't el codi que se't generar√† a la part inferior per no haver de tornar a omplir la taula des del principi.</p>

    <div style="text-align: center; margin-top: 40px;">
        <textarea id="inputCodi" rows="3" cols="80" placeholder="Enganxa aqu√≠ el codi..."></textarea><br>
        <button onclick="carregarNotes()">Carregar Notes</button>
        <p id="carregarError" style="color: red;"></p>
        <p id="missatgeCarrega" style="color: green; font-weight: bold;"></p>
    </div>

    <script>
        function carregarNotes() {
            const codiText = document.getElementById("inputCodi").value.trim();
            const errorMsg = document.getElementById("carregarError");
            const missatgeCarrega = document.getElementById("missatgeCarrega");

            errorMsg.textContent = "";
            missatgeCarrega.textContent = "";

            const prefix = "<jrl/N2025/DTAT/AER/";
            const suffix = "/jrl>";

            if (!codiText.startsWith(prefix) || !codiText.endsWith(suffix)) {
                errorMsg.textContent = "‚ö†Ô∏è El codi no t√© el format correcte.";
                return;
            }

            const notaStr = codiText.slice(prefix.length, -suffix.length);
            const notas = notaStr.split("-");

            for (let i = 0; i < notas.length; i++) {
                const notaInput = document.getElementById(`nota${i + 1}`);
                if (notaInput) {
                    if (notas[i] === "NA") {
                        notaInput.value = "";
                    } else {
                        const notaNum = parseFloat(notas[i]);
                        if (!isNaN(notaNum)) {
                            notaInput.value = notaNum;
                        }
                    }
                }
            }

            missatgeCarrega.textContent = "‚úÖ Notes carregades correctament!";
        }
    </script>

    <div class="container">
        <h1>DE3TAC - Calculadora de Mitjana Bloc Curricular - Aeros - Obligat√≤ries + Menci√≥</h1>
        <p>Introdueix les qualificacions obtingudes:</p>
        <table>
            <thead>
                <tr>
                    <th>Nom Assignatura</th>
                    <th>Cr√®dits (ECTS)</th>
                    <th>Nota</th>
                </tr>
            </thead>
            <tbody>
    <!-- Assignatures -->
    <tr><td>Infraestructures de Transport Aeri</td><td><span id="creditos1">7.5</span></td><td><input type="number" id="nota1" placeholder="Nota"></td></tr>
    <tr><td>Termodin√†mica</td><td><span id="creditos2">6</span></td><td><input type="number" id="nota2" placeholder="Nota"></td></tr>
    <tr><td>Inform√†tica 2</td><td><span id="creditos3">4.5</span></td><td><input type="number" id="nota3" placeholder="Nota"></td></tr>
    <tr><td>Ampliaci√≥ de Matem√†tiques 2</td><td><span id="creditos4">7.5</span></td><td><input type="number" id="nota4" placeholder="Nota"></td></tr>
    <tr><td>Circuits i Sistemes Lineals</td><td><span id="creditos5">4.5</span></td><td><input type="number" id="nota5" placeholder="Nota"></td></tr>
    <tr><td>Enginyeria Aeroportu√†ria</td><td><span id="creditos6">6</span></td><td><input type="number" id="nota6" placeholder="Nota"></td></tr>
    <tr><td>Mec√†nica de Fluids</td><td><span id="creditos7">7.5</span></td><td><input type="number" id="nota7" placeholder="Nota"></td></tr>
    <tr><td>Mec√†nica de Vol</td><td><span id="creditos8">3</span></td><td><input type="number" id="nota8" placeholder="Nota"></td></tr>
    <tr><td>Sostenibilitat de l'Enginyeria Aeroespacial</td><td><span id="creditos9">3</span></td><td><input type="number" id="nota9" placeholder="Nota"></td></tr>
    <tr><td>Electricitat</td><td><span id="creditos10">4.5</span></td><td><input type="number" id="nota10" placeholder="Nota"></td></tr>
    <tr><td>Ci√®ncia i Tecnologia dels Materials</td><td><span id="creditos11">6</span></td><td><input type="number" id="nota11" placeholder="Nota"></td></tr>
    <tr><td>Models per a la Gesti√≥ del Tr√†nsit Aeri</td><td><span id="creditos12">6</span></td><td><input type="number" id="nota12" placeholder="Nota"></td></tr>
    <tr><td>Aerodin√†mica</td><td><span id="creditos13">4.5</span></td><td><input type="number" id="nota13" placeholder="Nota"></td></tr>
    <tr><td>Meteorologia</td><td><span id="creditos14">3</span></td><td><input type="number" id="nota14" placeholder="Nota"></td></tr>
    <tr><td>Estructures i Resist√®ncia dels Materials</td><td><span id="creditos15">4.5</span></td><td><input type="number" id="nota15" placeholder="Nota"></td></tr>
    <tr><td>Electr√≤nica, [(ET+CSD)/2]</td><td><span id="creditos16">6</span></td><td><input type="number" id="nota16" placeholder="Nota"></td></tr>
    <tr><td>Comunicacions aeron√†utiques 1/Comunicacions aeroportu√†ries</td><td><span id="creditos17">6</span></td><td><input type="number" id="nota17" placeholder="Nota"></td></tr>
    <tr><td>Avi√≤nica/Instal¬∑lacions de comunicacions</td><td><span id="creditos18">7.5</span></td><td><input type="number" id="nota18" placeholder="Nota"></td></tr>
    <tr><td>Control i guiatge/Geot√®cnia</td><td><span id="creditos19">4.5</span></td><td><input type="number" id="nota19" placeholder="Nota"></td></tr>
    <tr><td>Navegaci√≥ a√®ria, cartografia i cosmografia/Instal¬∑lacions el√®ctriques</td><td><span id="creditos20">6</span></td><td><input type="number" id="nota20" placeholder="Nota"></td></tr>
    <tr><td>Operacions A√®ries/Planificaci√≥ i processos aeroportuaris</td><td><span id="creditos21">6</span></td><td><input type="number" id="nota21" placeholder="Nota"></td></tr>
    <tr><td>Comunicacions aeron√†utiques 2/Teoria d'estructures</td><td><span id="creditos22">6</span></td><td><input type="number" id="nota22" placeholder="Nota"></td></tr>
    <tr><td>Projectes en gesti√≥ del tr√†nsit aeri/Edificacions aeroportu√†ries</td><td><span id="creditos23">6</span></td><td><input type="number" id="nota23" placeholder="Nota"></td></tr>
    <tr><td>Radiolocalitzaci√≥/Gesti√≥ i manteniment d‚Äôaeroports</td><td><span id="creditos24">6</span></td><td><input type="number" id="nota24" placeholder="Nota"></td></tr>
</tbody>

        </table>
<p><strong><u>ATENCI√ì:</u> Pels estudiants que cursin la modalitat Aeroports + Telem√†tica la nota de l'assignatura <em>"Instal¬∑lacions de comunicacions"</em>, ser√†: <em>[(FT+IX+XLAM)/3]</em>.</strong></p>
        <button onclick="calcularMedia()">Calcular Mitjana Bloc Curricular</button>
        <p id="resultado"></p>
    </div>

    <script>
        function calcularMedia() {
            const creditos = [];
            const notas = [];
            const totalAsignaturas = 24;

            for (let i = 1; i <= totalAsignaturas; i++) {
                creditos.push(parseFloat(document.getElementById(`creditos${i}`).textContent) || 0);
                notas.push(parseFloat(document.getElementById(`nota${i}`).value) || 0);
            }

            let sumaPonderada = 0;
            let totalCreditos = 0;

            for (let i = 0; i < notas.length; i++) {
                sumaPonderada += notas[i] * creditos[i];
                totalCreditos += creditos[i];
            }

            const media = totalCreditos > 0 ? (sumaPonderada / totalCreditos) : 0;
            document.getElementById('resultado').textContent = `La mitjana ponderada √©s: ${media.toFixed(2)}`;
        }
    </script>

    <!-- Bot√≥ per generar el codi -->
    <div style="text-align: center; margin-top: 30px;">
        <button onclick="generarCodi()">Generar Codi</button>
        <p id="codiGenerat" style="margin-top: 10px; font-weight: bold;"></p>
    </div>

    <script>
        function generarCodi() {
            const notas = [];
            const totalAsignaturas = document.querySelectorAll('input[id^="nota"]').length;

            for (let i = 1; i <= totalAsignaturas; i++) {
                const nota = parseFloat(document.getElementById(`nota${i}`).value);
                notas.push(isNaN(nota) ? "NA" : nota.toFixed(2));
            }

            const codi = `<jrl/N2025/DTAT/AER/${notas.join("-")}/jrl>`;
            document.getElementById('codiGenerat').textContent = codi;
        }
    </script>

</body>
</html>
