<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DT-Aeros-Telecos - DE3TAC</title>
    <link rel="stylesheet" href="../../styles.css" />
    <link rel="icon" href="../../resources/icon.ico" type="image/x-icon" />
</head>
<body>
    <button class="shadow__btn" onclick="window.location.href='blocs.html'">
        ‚Üê
    </button>
    <button class="shadow__btn" onclick="window.location.href='../../index.html'">
        Inici
    </button>

    <h1 style="color: #0077c8;">
        <img src="../../resources/logo.jpg" alt="Logo Delegaci√≥ EETAC" width="75" />
        DT-Aeros-Telecos - Simulador de notes dels blocs curriculars de la
        <span style="color: #2b2301;">Delegaci√≥ d'Estudiants de l'EETAC</span>!
    </h1>
    <p></p>
    <p><strong>&nbsp;</strong></p>
    <h2><strong>‚ö†Ô∏è Has seleccionat el model: "<span style="color: #f1a326;">NORMATIVA CURRICULAR A PARTIR DE SETEMBRE CURS 2025-26</span>".</strong></h2>
    <p>Si tens pendent el tancament d'algun bloc curricular per l'avaluaci√≥ actual, (juny curs 2024-25), et recomanem tornar enrere i canviar al model actual.</p>
    <p><strong>&nbsp;</strong></p>
<h2 style="text-align: center;"><strong>üìÅ Ja tens un codi i vols carregar les notes? Enganxa'l en el recuadre inferior i clica <em>"Carregar Notes"</em>.</strong></h2>
    <p style="text-align: center;">Si encara no tens un codi omple la taula amb les notes que tinguis i guarda't el codi que se't generar√† a la part inferior per no haver de tornar a omplir la taula des del principi.</p>

    <div style="text-align: center; margin-top: 20px;">
        <textarea
            id="inputCodi"
            rows="3"
            cols="80"
            placeholder="Enganxa aqu√≠ el codi..."
        ></textarea><br />
        <button onclick="carregarNotes()">Carregar Notes</button>
        <p
            id="carregarError"
            style="color: red; font-weight: bold; margin-top: 10px;"
        ></p>
    </div>

    <div class="container">
        <h1>DE3TAC - Calculadora de Mitjana Bloc Curricular - Telem√†tica - Obligat√≤ries + Optatives</h1>
        <p>Introdueix les qualificacions obtingudes:</p>

        <table>
            <thead>
                <tr>
                    <th>Nom Assignatura</th>
                    <th>Numero de Cr√®dits (ECTS)</th>
                    <th>Nota Assignatura</th>
                </tr>
            </thead>
            <tbody>
                <!-- Assignatures inicials (10) -->
                <tr>
                    <td>Ampliaci√≥ de Matem√†tiques 2</td>
                    <td><span id="creditos1">6</span></td>
                    <td><input type="number" id="nota1" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Processament Digital del Senyal</td>
                    <td><span id="creditos2">6</span></td>
                    <td><input type="number" id="nota2" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Comunicacions Aeroportuaries/Comunicacions Aeron√†utiques 1</td>
                    <td><span id="creditos3">6</span></td>
                    <td><input type="number" id="nota3" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Circuits i Sistemes Digitals</td>
                    <td><span id="creditos4">6</span></td>
                    <td><input type="number" id="nota4" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Interconnexi√≥ de Xarxes</td>
                    <td><span id="creditos5">6</span></td>
                    <td><input type="number" id="nota5" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Sistemes Operatius</td>
                    <td><span id="creditos6">6</span></td>
                    <td><input type="number" id="nota6" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Ones Electromagn√®tiques en Sistemes de Comunicaci√≥</td>
                    <td><span id="creditos7">7.5</span></td>
                    <td><input type="number" id="nota7" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Emissors i Receptors</td>
                    <td><span id="creditos8">4.5</span></td>
                    <td><input type="number" id="nota8" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Circuits Electr√≤nics i Sistemes d'Alimentaci√≥</td>
                    <td><span id="creditos9">6</span></td>
                    <td><input type="number" id="nota9" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Arquitectura i Protocols d'Internet</td>
                    <td><span id="creditos10">6</span></td>
                    <td><input type="number" id="nota10" placeholder="Nota" /></td>
                </tr>
                <!-- Assignatures noves (11) -->
                <tr>
                    <td>Mobilitat, Xarxes i Seveis</td>
                    <td><span id="creditos11">6</span></td>
                    <td><input type="number" id="nota11" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Xarxes Locals d'Acc√©s i Metropolitanes</td>
                    <td><span id="creditos12">6</span></td>
                    <td><input type="number" id="nota12" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Disseny de Serveis i Aplicacions</td>
                    <td><span id="creditos13">10</span></td>
                    <td><input type="number" id="nota13" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>An√†lisi i Dimensionament de Xarxes</td>
                    <td><span id="creditos14">4</span></td>
                    <td><input type="number" id="nota14" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Serveis Audiovisuals sobre Internet</td>
                    <td><span id="creditos15">4</span></td>
                    <td><input type="number" id="nota15" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Planificaci√≥ de Xarxes</td>
                    <td><span id="creditos16">4</span></td>
                    <td><input type="number" id="nota16" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Xarxes de Transport</td>
                    <td><span id="creditos17">4</span></td>
                    <td><input type="number" id="nota17" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Seguretat en Xarxes</td>
                    <td><span id="creditos18">4</span></td>
                    <td><input type="number" id="nota18" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Enginyeria d'Aplicacions</td>
                    <td><span id="creditos19">12</span></td>
                    <td><input type="number" id="nota19" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Infraestructures i Operaci√≥ de Telecomunicacions</td>
                    <td><span id="creditos20">6</span></td>
                    <td><input type="number" id="nota20" placeholder="Nota" /></td>
                </tr>
                <tr>
                    <td>Tecnologies d'Informaci√≥ Qu√†ntica</td>
                    <td><span id="creditos21">6</span></td>
                    <td><input type="number" id="nota21" placeholder="Nota" /></td>
                </tr>
            </tbody>
        </table>
    

        <button onclick="calcularMedia()">Calcular Mitjana Bloc Curricular</button>

        <p id="resultado"></p>

        <div style="text-align: center; margin-top: 30px;">
            <button onclick="generarCodi()">Generar Codi</button>
            <p id="codiGenerat" style="font-weight: bold; margin-top: 10px;"></p>
        </div>
    </div>

    <script>
        function carregarNotes() {
            const codiText = document.getElementById("inputCodi").value.trim();
            const errorMsg = document.getElementById("carregarError");
            errorMsg.textContent = "";

            const prefix = "<jrl/N2025/DTAT/TEL/";
            const suffix = "/jrl>";

            if (!codiText.startsWith(prefix) || !codiText.endsWith(suffix)) {
                errorMsg.style.color = "red";
                errorMsg.textContent = "‚ö†Ô∏è El codi no t√© el format correcte.";
                return;
            }

            const notaStr = codiText.slice(prefix.length, -suffix.length);
            const notas = notaStr.split("-");

            if (notas.length !== 21) {
                errorMsg.style.color = "red";
                errorMsg.textContent = `‚ö†Ô∏è El codi no cont√© el nombre correcte de notes (esperat: 21, rebut: ${notas.length}).`;
                return;
            }

            for (let i = 0; i < notas.length; i++) {
                const notaInput = document.getElementById(`nota${i + 1}`);
                if (notaInput) {
                    if (notas[i] === "NA") {
                        notaInput.value = "";
                    } else {
                        const notaNum = parseFloat(notas[i]);
                        if (!isNaN(notaNum)) {
                            notaInput.value = notaNum;
                        } else {
                            notaInput.value = "";
                        }
                    }
                }
            }

            errorMsg.style.color = "green";
            errorMsg.textContent = "‚úÖ Notes carregades correctament!";
        }

        function calcularMedia() {
            const creditos = [];
            const notas = [];
            const totalAssignatures = 21;
            for (let i = 1; i <= totalAssignatures; i++) {
                creditos.push(parseFloat(document.getElementById(`creditos${i}`).textContent) || 0);
                notas.push(parseFloat(document.getElementById(`nota${i}`).value) || 0);
            }

            let sumaPonderada = 0;
            let totalCreditos = 0;

            for (let i = 0; i < notas.length; i++) {
                sumaPonderada += notas[i] * creditos[i];
                totalCreditos += creditos[i];
            }

            const media = totalCreditos > 0 ? (sumaPonderada / totalCreditos) : 0;

            document.getElementById('resultado').textContent = `La mitjana ponderada √©s: ${media.toFixed(2)}`;
        }

        function generarCodi() {
            const totalAssignatures = 21;
            const notas = [];
            for (let i = 1; i <= totalAssignatures; i++) {
                const nota = parseFloat(document.getElementById(`nota${i}`).value);
                notas.push(isNaN(nota) ? "NA" : nota.toFixed(2));
            }

            const codi = `<jrl/N2025/DTAT/TEL/${notas.join("-")}/jrl>`;
            document.getElementById("codiGenerat").textContent = codi;
        }
    </script>
</body>
</html>
